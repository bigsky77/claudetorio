#!/bin/bash
# Start Factorio in the background after a delay
# This runs during container init (as root) before the display is fully ready,
# so we set up permissions here and schedule the launch.

# Fix permissions on the config/data volume so the runtime user can write
chown -R "${PUID:-1000}:${PGID:-1000}" /config/factorio-data 2>/dev/null || true
mkdir -p /config/factorio-data/saves /config/factorio-data/mods /config/factorio-data/script-output
chown -R "${PUID:-1000}:${PGID:-1000}" /config/factorio-data

echo "Factorio startup scheduled"
